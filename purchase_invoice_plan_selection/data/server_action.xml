<odoo>

    <record id="apply_on_all_product_line" model="ir.actions.server">
        <field name="name">All order lines</field>
        <field
            name="model_id"
            ref="purchase_invoice_plan.model_purchase_make_planned_invoice"
        />
        <field name="state">code</field>
        <field name="code">
purchase_id = env.context.get("purchase_id")
purchase = env["purchase.order"].browse(purchase_id)
action = purchase.order_line.filtered(lambda l: l.qty_to_invoice > 0 or not l.product_qty).ids
        </field>
    </record>

    <record id="apply_on_matched_amount" model="ir.actions.server">
        <field name="name">An order line with matched amount</field>
        <field
            name="model_id"
            ref="purchase_invoice_plan.model_purchase_make_planned_invoice"
        />
        <field name="state">code</field>
        <field name="code">
purchase_id = env.context.get("purchase_id")
installment_id = env.context.get("installment_id")
purchase = env["purchase.order"].browse(purchase_id)
installment = env["purchase.invoice.plan"].browse(installment_id)
action = purchase.order_line.filtered(
    lambda l: l.qty_to_invoice > 0 and l.price_subtotal == installment.amount
)[:1].ids
        </field>
    </record>

</odoo>
