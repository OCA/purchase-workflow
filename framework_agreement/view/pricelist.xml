<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <record id="agreement_view_form" model="ir.ui.view">
      <field name="name">agreement_view_form</field>
      <field name="model">product.pricelist</field>
      <field name="arch" type="xml">
        <form string="Products Price List">
          <label for="name" class="oe_edit_only"/>
          <div class="oe_right oe_button_box" style="width: 300px;" name="buttons">
            <button class="oe_inline oe_stat_button" name="action_open_relevant_po" type="object" icon="fa-shopping-cart">
              <field string="Relevant PO" name="relevant_po_count" widget="statinfo" />
            </button>
          </div>
          <h1>
            <field name="name"/>
          </h1>
          <group col="4">
            <button string="Open Prices" name="open_prices" type="object" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
            <newline/>
            <field name="portfolio_id" invisible="context.get('hide_portfolio')"/>
            <field name="active"/>
            <field name="type" attrs="{'invisible': [('portfolio_id', '!=', False)]}"/>
          </group>

          <notebook>

            <page string="Agreement information">
              <group>
                <group>
                  <field name="picking_type_id" attrs="{'invisible': [('type', '!=', 'purchase')]}" domain="[('code','=','incoming')]" widget="selection" context="{'special_shortened_wh_name': True}" groups="stock.group_locations"/>
                  <field name="payment_term_id" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                  <field name="terms_of_payment" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                  <field name="incoterm_id" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                  <field name="incoterm_address" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                  <field name="dest_address_id" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                </group>
                <group>
                  <field name="start_date" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                  <field name="end_date" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
                  <field name="currency_id" groups="base.group_multi_currency"/>
                  <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                </group>
              </group>
            </page>

            <page string="Supplier and prices information">
              <field name="supplierinfo_ids">
                <tree>
                  <field name="sequence"/>
                  <field name="name"/>
                  <field name="product_tmpl_id"/>
                  <field name="delay"/>
                  <field name="min_qty"/>
                </tree>
              </field>
            </page>

            <page string="Pricelist versions">
              <field name="version_id" context="{'type':type}">
                <form string="Pricelist Version">
                  <group col="4">
                    <field name="name"/>
                    <field name="active"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                  </group>
                  <field name="items_id" context="{'type':type}"/>
                </form>
                <tree string="Pricelist Version">
                  <field name="name"/>
                  <field name="active"/>
                  <field name="date_start"/>
                  <field name="date_end"/>
                </tree>
              </field>
            </page>

          </notebook>

        </form>
      </field>
    </record>

    <record id="product_pricelist_view_tree" model="ir.ui.view">
      <field name="name">product_pricelist_view_tree</field>
      <field name="model">product.pricelist</field>
      <field name="inherit_id" ref="product.product_pricelist_view_tree" />
      <field name="arch" type="xml">

        <field name="active" position="before">
          <field name="portfolio_id" invisible="context.get('hide_portfolio')"/>
        </field>

        <field name="type" position="after">
          <button string="Open Prices" name="open_prices" type="object" attrs="{'invisible': [('type', '!=', 'purchase')]}"/>
          <field name="picking_type_id" />
          <field name="payment_term_id" />
          <field name="terms_of_payment" />
          <field name="incoterm_id" />
          <field name="incoterm_address" />
          <field name="start_date" />
          <field name="end_date" />
        </field>

      </field>
    </record>

    <record id="product_pricelist_view_search" model="ir.ui.view">
      <field name="name">product_pricelist_view_search</field>
      <field name="model">product.pricelist</field>
      <field name="inherit_id" ref="product.product_pricelist_view_search" />
      <field name="arch" type="xml">

        <field name="active" position="before">
          <field name="portfolio_id" />
        </field>

      </field>
    </record>

  </data>
</openerp>

